<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Global Asset Management Empire</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{
    margin:0;
    background:#0b0f1a;
    color:#00ffcc;
    font-family:Arial;
}
header{
    background:#111;
    padding:15px;
    font-size:22px;
    text-align:center;
    font-weight:bold;
}
.container{
    display:grid;
    grid-template-columns:300px 1fr;
    height:90vh;
}
.sidebar{
    background:#111827;
    padding:20px;
}
.main{
    padding:20px;
}
button{
    width:100%;
    padding:10px;
    margin-top:10px;
    background:#00ffcc;
    border:none;
    font-weight:bold;
    cursor:pointer;
}
input{
    width:100%;
}
.card{
    background:#111827;
    padding:15px;
    margin-bottom:15px;
}
canvas{
    background:#111;
}
</style>
</head>
<body>

<header>
Global Asset Management Empire Simulation
</header>

<div class="container">

<div class="sidebar">

<h3>控制面板</h3>

<label>ETF费率 (%)</label>
<input type="range" min="0.03" max="0.5" step="0.01" id="fee" value="0.1">
<span id="feeDisplay">0.1%</span>

<label>市场排名 (1=最好)</label>
<input type="range" min="1" max="10" step="1" id="rank" value="3">
<span id="rankDisplay">3</span>

<label>市场收益率 (%)</label>
<input type="range" min="-5" max="10" step="0.1" id="return" value="5">
<span id="returnDisplay">5%</span>

<button onclick="start()">启动帝国</button>

</div>

<div class="main">

<div class="card">
<h3>集团总AUM（十亿美元）</h3>
<canvas id="aumChart"></canvas>
</div>

<div class="card">
<h3>集团利润（十亿美元）</h3>
<canvas id="profitChart"></canvas>
</div>

<div class="card">
<h3>市场份额</h3>
<canvas id="shareChart"></canvas>
</div>

</div>

</div>

<script>

// 初始AUM（十亿美元）
let AUM = 2000;
let pensionAUM = 3000;
let mutualAUM = 1000;

let aumHistory = [];
let profitHistory = [];
let shareHistory = [];

let running = false;

const aumChart = new Chart(document.getElementById('aumChart'),{
type:'line',
data:{labels:[],datasets:[{label:'AUM',data:[]}]}
});

const profitChart = new Chart(document.getElementById('profitChart'),{
type:'line',
data:{labels:[],datasets:[{label:'Profit',data:[]}]}
});

const shareChart = new Chart(document.getElementById('shareChart'),{
type:'line',
data:{labels:[],datasets:[{label:'Market Share',data:[]}]}
});

function netFlow(fee, rank){
    return (0.02 - fee/100)*0.5 + (1/rank)*0.3;
}

function complianceCost(totalAUM){
    return totalAUM * 0.0005;
}

function update(){

    let fee = parseFloat(document.getElementById('fee').value);
    let rank = parseInt(document.getElementById('rank').value);
    let marketReturn = parseFloat(document.getElementById('return').value)/100;

    document.getElementById('feeDisplay').innerText = fee + "%";
    document.getElementById('rankDisplay').innerText = rank;
    document.getElementById('returnDisplay').innerText = marketReturn*100 + "%";

    let totalAUM = AUM + pensionAUM + mutualAUM;

    let flow = netFlow(fee, rank) * totalAUM;

    // 更新AUM
    AUM = AUM*(1+marketReturn) + flow*0.5;
    pensionAUM = pensionAUM*(1+marketReturn*0.6) + flow*0.3;
    mutualAUM = mutualAUM*(1+marketReturn*0.8) + flow*0.2;

    totalAUM = AUM + pensionAUM + mutualAUM;

    // 利润
    let managementFee = totalAUM * (fee/100);
    let cost = complianceCost(totalAUM);
    let profit = managementFee - cost;

    // 市场份额模拟
    let marketShare = (11-rank)/55;

    aumHistory.push(totalAUM);
    profitHistory.push(profit);
    shareHistory.push(marketShare);

    aumChart.data.labels.push(aumHistory.length);
    aumChart.data.datasets[0].data = aumHistory;
    aumChart.update();

    profitChart.data.labels.push(profitHistory.length);
    profitChart.data.datasets[0].data = profitHistory;
    profitChart.update();

    shareChart.data.labels.push(shareHistory.length);
    shareChart.data.datasets[0].data = shareHistory;
    shareChart.update();

}

function start(){
    if(!running){
        running = true;
        setInterval(update,1000);
    }
}

</script>

</body>
</html>
